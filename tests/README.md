# テスト戦略

## テストの種類

### 1. 単体テスト（Unit Tests）
UI コンポーネントとユーティリティ関数のテスト

```bash
# 単体テストのみ実行
pnpm test:unit

# ウォッチモードで実行
pnpm test:unit:watch

# カバレッジレポート付きで実行
pnpm test:unit:coverage
```

**対象：**
- コンポーネントの表示ロジック
- ユーザーインタラクション
- ユーティリティ関数
- 純粋な計算ロジック

### 2. 統合テスト（Integration Tests）
データベースとビジネスロジックのテスト

```bash
# Dockerでデータベースを起動してテスト実行
docker compose up -d
pnpm test:integration
```

**対象：**
- データベース操作（CRUD）
- ビジネスロジック
- データバリデーション
- 認証フロー

### 3. E2Eテスト（今後実装予定）
Playwrightを使用した実際のブラウザでのテストを予定しています。

### 4. すべてのテスト
```bash
# 単体テストと統合テストを実行
pnpm test:all

# CI環境での実行
pnpm test:ci
```

## テストカバレッジ

### 単体テスト（57テスト）
- ✅ コンポーネント表示
- ✅ ユーザーインタラクション
- ✅ ユーティリティ関数
- ✅ フォーマット処理

### 統合テスト（38テスト）
- ✅ 認証・ユーザー管理
- ✅ サブスクリプションCRUD
- ✅ ビジネスロジック
- ✅ データバリデーション
- ✅ リマインダー機能

## ディレクトリ構造

```
tests/
├── unit/                    # 単体テスト
│   ├── components/         # UIコンポーネント
│   ├── lib/               # ライブラリ関数
│   └── utils/             # テストユーティリティ
│
├── integration/            # 統合テスト
│   ├── db/                # データベース操作
│   ├── services/          # ビジネスロジック
│   └── utils/             # テストヘルパー
│
└── README.md              # このファイル
```

## テスト方針

1. **APIルートの直接テスト**は統合テストでカバー
2. **UIコンポーネント**は単体テストでカバー
3. **ビジネスロジック**は統合テストでカバー
4. **純粋な関数**は単体テストでカバー

## 削除されたテスト

以下のテストは統合テストで十分にカバーされているため削除：
- `tests/unit/api/subscriptions.test.ts` - API統合テストでカバー
- `tests/unit/components/subscriptions/subscription-form.test.tsx` - ライフサイクル統合テストでカバー
EOF < /dev/null